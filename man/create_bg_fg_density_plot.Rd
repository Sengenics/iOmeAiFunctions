% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/density_plot_functions.R
\name{create_bg_fg_density_plot}
\alias{create_bg_fg_density_plot}
\title{Create Density Plots for Background and Foreground Signal Analysis}
\usage{
create_bg_fg_density_plot(
  datCollate,
  QC,
  samples,
  facet_by = "Sample",
  xlim = c(4, 16),
  scale = "auto",
  col_num = 3,
  flag_ylim = 2
)
}
\arguments{
\item{datCollate}{A list containing data collection objects with components:
\itemize{
\item \code{data$RawData}: Data.frame with columns Labels, Sample, Protein, BG, FG, NetI
\item \code{data$feature_df}: Data.frame with feature definitions including 'data' column
\item \code{data$RFU_thresold}: Optional data.frame with RFU threshold values
\item \code{data$lowIntensityThresholds}: Optional data.frame with nMAD2NetI values
\item \code{param$BG_overlap_metric}: Character specifying metric ("Mean", "Median", or "Mode")
}}

\item{QC}{A list containing quality control data with component:
\itemize{
\item \code{BGFG_stats}: Data.frame with BG/FG statistics (mean, median, mode, overlap, sd)
}}

\item{samples}{Character vector of sample names to include in the plot}

\item{facet_by}{Character string specifying faceting variable. Default is "Sample"}

\item{xlim}{Numeric vector of length 2 specifying x-axis limits. Default is c(4, 16)}

\item{scale}{Character string for scale type: "auto", "full", or "fixed". Default is "auto"}

\item{col_num}{Integer specifying number of columns for faceting. Default is 3}

\item{flag_ylim}{Numeric value for flag y-axis limit. Default is 2}
}
\value{
A ggplot2 object showing density distributions with reference lines
}
\description{
This function generates faceted density plots to visualize the distribution
of Background (BG) and Foreground (FG) signal intensities across samples.
It's primarily used for quality control to identify background overlap issues.
}
\details{
The function creates density plots with the following reference lines:
\itemize{
\item Black vertical lines: BG and FG statistics based on selected metric
\item Red dashed line: Upper BG threshold (2SD above BG, if UpperBG column present)
\item Green dashed line: Lower NetI threshold (nMAD2NetI, if available)
}

The metric used for BG/FG statistics is determined by \code{datCollate$param$BG_overlap_metric}.
If not specified, "Mode" is used as default.
}
\examples{
\dontrun{
# Basic usage with datCollate and QC objects
plot <- create_bg_fg_density_plot(
  datCollate = datCollate,
  QC = QC,
  samples = c("Sample1", "Sample2", "Sample3")
)

# With custom faceting and limits
plot <- create_bg_fg_density_plot(
  datCollate = datCollate,
  QC = QC,
  samples = selected_samples,
  facet_by = "Protein",
  xlim = c(5, 12),
  scale = "fixed"
)
}
Note : replaced select_density_plot_function
}
